
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>æ“ä½œç³»ç»Ÿç¬¬å››æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”åŒæ­¥ä¸äº’æ–¥ | yoyo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="@(å­¦ä¹ èµ„æ–™)[OS, å¤šçº¿ç¨‹, è¿›ç¨‹åŒæ­¥, è¿›ç¨‹äº’æ–¥, ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…]

ç†è§£Linuxæ“ä½œç³»ç»Ÿå¤šçº¿ç¨‹ä»¥åŠå¤šçº¿ç¨‹ä¹‹é—´å…³äºèµ„æºçš„åŒæ­¥ä¸äº’æ–¥

å²³å‹(yoyo9170@163.com)

ä¸ŠèŠ‚è¯¾æˆ‘ä»¬ä¸»è¦ä»‹ç»äº†ç®¡é“å’Œå…±äº«å†…å­˜è¿›ç¨‹é—´é€šä¿¡ï¼Œå¹¶å®Œæˆäº†ç›¸åº”çš„å®éªŒï¼Œæœ¬æ¬¡å®éªŒä¸»è¦è®²è§£å’Œè€ƒå¯Ÿçš„æ˜¯å¤šçº¿ç¨‹ä»¥åŠæ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜ï¼Œå…¶ä¸­æ ¸å¿ƒä¸»è¦æ¶‰åŠåˆ°ä¸‰ä¸ªæ–¹é¢ï¼šPthreadä»‹ç»ã€Pthreadåˆ›å»ºå¤šçº¿ç¨‹ã€äº’æ–¥é”ã€‚

Pth">
<meta property="og:type" content="article">
<meta property="og:title" content="æ“ä½œç³»ç»Ÿç¬¬å››æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”åŒæ­¥ä¸äº’æ–¥">
<meta property="og:url" content="http://yoursite.com/2016/01/07/Linux-lab4/index.html">
<meta property="og:site_name" content="yoyo">
<meta property="og:description" content="@(å­¦ä¹ èµ„æ–™)[OS, å¤šçº¿ç¨‹, è¿›ç¨‹åŒæ­¥, è¿›ç¨‹äº’æ–¥, ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…]

ç†è§£Linuxæ“ä½œç³»ç»Ÿå¤šçº¿ç¨‹ä»¥åŠå¤šçº¿ç¨‹ä¹‹é—´å…³äºèµ„æºçš„åŒæ­¥ä¸äº’æ–¥

å²³å‹(yoyo9170@163.com)

ä¸ŠèŠ‚è¯¾æˆ‘ä»¬ä¸»è¦ä»‹ç»äº†ç®¡é“å’Œå…±äº«å†…å­˜è¿›ç¨‹é—´é€šä¿¡ï¼Œå¹¶å®Œæˆäº†ç›¸åº”çš„å®éªŒï¼Œæœ¬æ¬¡å®éªŒä¸»è¦è®²è§£å’Œè€ƒå¯Ÿçš„æ˜¯å¤šçº¿ç¨‹ä»¥åŠæ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜ï¼Œå…¶ä¸­æ ¸å¿ƒä¸»è¦æ¶‰åŠåˆ°ä¸‰ä¸ªæ–¹é¢ï¼šPthreadä»‹ç»ã€Pthreadåˆ›å»ºå¤šçº¿ç¨‹ã€äº’æ–¥é”ã€‚

Pth">
<meta property="og:updated_time" content="2016-01-07T10:16:33.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ“ä½œç³»ç»Ÿç¬¬å››æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”åŒæ­¥ä¸äº’æ–¥">
<meta name="twitter:description" content="@(å­¦ä¹ èµ„æ–™)[OS, å¤šçº¿ç¨‹, è¿›ç¨‹åŒæ­¥, è¿›ç¨‹äº’æ–¥, ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…]

ç†è§£Linuxæ“ä½œç³»ç»Ÿå¤šçº¿ç¨‹ä»¥åŠå¤šçº¿ç¨‹ä¹‹é—´å…³äºèµ„æºçš„åŒæ­¥ä¸äº’æ–¥

å²³å‹(yoyo9170@163.com)

ä¸ŠèŠ‚è¯¾æˆ‘ä»¬ä¸»è¦ä»‹ç»äº†ç®¡é“å’Œå…±äº«å†…å­˜è¿›ç¨‹é—´é€šä¿¡ï¼Œå¹¶å®Œæˆäº†ç›¸åº”çš„å®éªŒï¼Œæœ¬æ¬¡å®éªŒä¸»è¦è®²è§£å’Œè€ƒå¯Ÿçš„æ˜¯å¤šçº¿ç¨‹ä»¥åŠæ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜ï¼Œå…¶ä¸­æ ¸å¿ƒä¸»è¦æ¶‰åŠåˆ°ä¸‰ä¸ªæ–¹é¢ï¼šPthreadä»‹ç»ã€Pthreadåˆ›å»ºå¤šçº¿ç¨‹ã€äº’æ–¥é”ã€‚

Pth">
  
    <link rel="alternative" href="/atom.xml" title="yoyo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">yoyo</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">ç å†œã€ç¨‹åºå‘˜ã€æœªæ¥çš„å…¨æ ˆæ”»åŸç‹®</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="yoursite.com">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-Linux-lab4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/07/Linux-lab4/" class="article-date">
  <time datetime="2016-01-07T09:59:03.000Z" itemprop="datePublished">2016-01-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      æ“ä½œç³»ç»Ÿç¬¬å››æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”åŒæ­¥ä¸äº’æ–¥
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>@(å­¦ä¹ èµ„æ–™)[OS, å¤šçº¿ç¨‹, è¿›ç¨‹åŒæ­¥, è¿›ç¨‹äº’æ–¥, ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…]</p>
<blockquote>
<p>ç†è§£Linuxæ“ä½œç³»ç»Ÿå¤šçº¿ç¨‹ä»¥åŠå¤šçº¿ç¨‹ä¹‹é—´å…³äºèµ„æºçš„åŒæ­¥ä¸äº’æ–¥</p>
<ul>
<li>å²³å‹(yoyo9170@163.com)</li>
</ul>
<p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬ä¸»è¦ä»‹ç»äº†ç®¡é“å’Œå…±äº«å†…å­˜è¿›ç¨‹é—´é€šä¿¡ï¼Œå¹¶å®Œæˆäº†ç›¸åº”çš„å®éªŒï¼Œæœ¬æ¬¡å®éªŒä¸»è¦è®²è§£å’Œè€ƒå¯Ÿçš„æ˜¯å¤šçº¿ç¨‹ä»¥åŠæ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜ï¼Œå…¶ä¸­æ ¸å¿ƒä¸»è¦æ¶‰åŠåˆ°ä¸‰ä¸ªæ–¹é¢ï¼š<strong>Pthread</strong>ä»‹ç»ã€<strong>Pthread</strong>åˆ›å»ºå¤šçº¿ç¨‹ã€äº’æ–¥é”ã€‚</p>
</blockquote>
<h3 id="Pthread_u7B80_u4ECB"><a href="#Pthread_u7B80_u4ECB" class="headerlink" title="Pthreadç®€ä»‹"></a>Pthreadç®€ä»‹</h3><p>   <code>pthread</code>è¡¨ç¤º <code>POSIX Threads</code>ï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåº“ã€‚C è¯­è¨€ç¨‹åºä½¿ç”¨ <code>pthread</code> éœ€è¦å¼•ç”¨ <code>pthread.h</code>å¤´æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨é“¾æ¥æ—¶æŒ‡å®šå‚æ•° <code>-lpthread</code>ã€‚</p>
<p>   <code>pthread</code> å¯ä»¥åˆ›å»ºå¤šçº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œçº¿ç¨‹ç±»ä¼¼äºè¿›ç¨‹ï¼Œä½†æ˜¯çº¿ç¨‹æ˜¯å…±äº«åœ°å€ç©ºé—´çš„ï¼Œå› æ­¤åŒä¸€è¿›ç¨‹ä¸‹çš„å¤šä¸ªçº¿ç¨‹å¯ä»¥éƒ½è®¿é—®å’Œæ“ä½œåŒä¸€å˜é‡ã€‚å› æ­¤éœ€è¦å¼€å‘è€…è¿›è¡Œè®¿é—®åŒæ­¥æ§åˆ¶ã€‚</p>
<ul>
<li><strong>åˆ›å»ºçº¿ç¨‹</strong><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#include &lt;pthread.h&gt;</span></span><br><span class="line"><span class="keyword">int</span> pthread_create(pthread_t *<span class="keyword">restrict</span> tidp,<span class="keyword">const</span> pthread_attr_t *<span class="keyword">restrict</span> attr,<span class="keyword">void</span> *(*start_rtn)(<span class="keyword">void</span>), <span class="keyword">void</span> *<span class="keyword">restrict</span> arg);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>è¯¥å‡½æ•°æ‰§è¡ŒæˆåŠŸè¿”å›ä¸º0</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŒ‡å‘çº¿ç¨‹æ ‡è¯†ç¬¦çš„æŒ‡é’ˆã€‚</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥è®¾ç½®çº¿ç¨‹å±æ€§ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯çº¿ç¨‹è¿è¡Œå‡½æ•°çš„èµ·å§‹åœ°å€ã€‚</li>
<li>æœ€åä¸€ä¸ªå‚æ•°æ˜¯è¿è¡Œå‡½æ•°çš„å‚æ•°ã€‚<br><em>å…¶ä¸­è¯´æ˜ï¼Œæœ€åä¸€ä¸ªå‚æ•°å³ä¸ºè¯¥çº¿ç¨‹çš„å…¥å£å‡½æ•°ï¼Œåˆ›å»ºäº†çº¿ç¨‹ä¹‹åï¼Œæ–°çš„çº¿ç¨‹ä¼šæ‹¥æœ‰è‡ªå·±çš„å‡½æ•°æ ˆï¼Œä½†æ˜¯å…¨å±€æ•°æ®å’Œå…¶ä»–çº¿ç¨‹å…±äº«ã€‚å› æ­¤ï¼Œå‡½æ•°çš„å±€éƒ¨å˜é‡æ˜¯çº¿ç¨‹çš„ç§æœ‰æ•°æ®ï¼Œè€Œå‡½æ•°ä¹‹å¤–çš„å…¨å±€å˜é‡åˆ™æ˜¯åœ¨æ‰€æœ‰çº¿ç¨‹ä¹‹é—´å…±äº«çš„ã€‚</em></li>
</ul>
</blockquote>
<ul>
<li><strong>ç»“æŸçº¿ç¨‹</strong><blockquote>
<p>ç»“æŸä¸€ä¸ªè¿›ç¨‹æœ‰è®¸å¤šç§æ–¹æ³•ï¼Œçº¿ç¨‹å¯ä»¥è°ƒç”¨<em>pthread_exit</em>é€€å‡ºï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä»<em>start_routine</em>å‡½æ•°è¿”å›å®ç°é€€å‡ºã€‚æ­¤å¤–ï¼Œçº¿ç¨‹æ˜¯é™„å±äºè¿›ç¨‹çš„ï¼Œå› æ­¤ä»»ä½•ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨<em>exit</em>ç»“æŸè¿›ç¨‹çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½ä¼šé€€å‡ºã€‚</p>
</blockquote>
</li>
<li><p><strong>çº¿ç¨‹ç­‰å¾…</strong></p>
<blockquote>
<p>è°ƒç”¨å‡½æ•°<em>pthread_join</em>å¯ä»¥ç­‰å¾…æŸä¸ªçº¿ç¨‹ç»“æŸã€‚</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int <span class="function"><span class="title">pthread_join</span><span class="params">(pthread_t tid, void** ret)</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦ç­‰å¾…çš„çº¿ç¨‹çš„IDï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯çº¿ç¨‹çš„è¿”å›å€¼ï¼Œå³é€€å‡ºçŠ¶æ€ã€‚è¿™ä¸ªå‡½æ•°ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°æ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹é€€å‡ºæ‰ä¼šç»§ç»­è¿è¡Œã€‚</p>
</blockquote>
</li>
</ul>
<h3 id="u4E92_u65A5_u9501"><a href="#u4E92_u65A5_u9501" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h3><p>å› ä¸ºçº¿ç¨‹å¯ä»¥å…±äº«å…¨å±€æ•°æ®ï¼Œå¤šä¸ªçº¿ç¨‹å¯¹å…¨å±€æ•°æ®è¿›è¡Œå†™å…¥æ“ä½œå°±éœ€è¦åŒæ­¥ï¼ŒåŒæ­¥çš„å…¸å‹åšæ³•æ˜¯ä½¿ç”¨é”ã€‚<code>pthread</code>ä¸­çš„äº’æ–¥é”çš„æ•°æ®ç±»å‹æ˜¯<code>pthread_mutex_t</code>ï¼Œè¡¨ç¤ºåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ‹¥æœ‰è¿™æŠŠé”ï¼Œå…¶ä»–å°è¯•è·å–è¿™æŠŠé”çš„çº¿ç¨‹éƒ½éœ€è¦ç­‰å¾…ã€‚åˆ›å»ºå’Œé”€æ¯äº’æ–¥é”çš„æ–¹æ³•ä¸ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pthread_mutex_t</span> mymutex = PTHREAD_MUTEX_INITIALIZER;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_init</span><span class="params">(pthread_mutex_t *mutex, <span class="keyword">const</span> pthread_mutexattr_t *attr)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_destroy</span><span class="params">(pthread_mutex_t *mutex)</span></span>;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆéœ€è¦ä½¿ç”¨å®<code>PTHREAD_MUTEX_INITIALIZER</code>ç±»å‹çš„å˜é‡ï¼Œç„¶åä½¿ç”¨<code>pthread_mutex_init</code>å‡½æ•°åˆå§‹åŒ–ï¼Œåˆ›å»ºäº’æ–¥é”çš„æ—¶å€™ï¼Œå¯ä»¥å°†<code>attr</code>å‚æ•°ä¼ å…¥NULLä½¿ç”¨é»˜è®¤è®¾ç½®ã€‚ä¸¤ä¸ªå‡½æ•°åœ¨æ‰§è¡ŒæˆåŠŸçš„æ—¶å€™éƒ½è¿”å›0ã€‚</p>
<p>è·å–é”å’Œé‡Šæ”¾æ‰€ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°å®Œæˆï¼š<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_lock</span><span class="params">(pthread_mutex_t *mutex)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_trylock</span><span class="params">(pthread_mutex_t *mutex)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_unlock</span><span class="params">(pthread_mutex_t *mutex)</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä¸­ï¼Œ<code>pthread_mutex_lock</code>å’Œ<code>pthread_mutex_trylock</code>å‡½æ•°éƒ½ä¼šå°è¯•è·å–äº’æ–¥é”ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºå½“é”å·²ç»è¢«å…¶ä»–çº¿ç¨‹ä½¿ç”¨çš„æ—¶å€™ï¼Œ<code>pthread_mutex_lock</code>å‡½æ•°ä¼šé˜»å¡ï¼Œç›´åˆ°è·å–è¿™æŠŠé”ï¼Œè€Œ<code>pthread_mutex_trylock</code>åˆ™ä¼šç›´æ¥è¿”å›ä¸€ä¸ªéé›¶å€¼ã€‚</p>
<h3 id="u591A_u7EBF_u7A0B_u793A_u4F8B"><a href="#u591A_u7EBF_u7A0B_u793A_u4F8B" class="headerlink" title="å¤šçº¿ç¨‹ç¤ºä¾‹"></a>å¤šçº¿ç¨‹ç¤ºä¾‹</h3><h4 id="u521B_u5EFA_u7EBF_u7A0B"><a href="#u521B_u5EFA_u7EBF_u7A0B" class="headerlink" title="åˆ›å»ºçº¿ç¨‹"></a>åˆ›å»ºçº¿ç¨‹</h4><ul>
<li><p>ç¼–å†™pthread.c</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//pthread.c</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span> </span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span> </span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span> </span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span> </span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pthread_t</span> tid;</span><br><span class="line"><span class="function"><span class="keyword">void</span> * <span class="title">thread_fun</span><span class="params">(<span class="keyword">void</span> * name)</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s: Hello world !\n"</span>,name); </span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> err;</span><br><span class="line">	err = pthread_create(&amp;tid,<span class="literal">NULL</span>, thread_fun,<span class="string">"Child thread"</span>);</span><br><span class="line">	<span class="keyword">if</span>(err !=<span class="number">0</span>)&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"can't create thread!\n"</span>);</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">1</span>); </span><br><span class="line">&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Main thread: Hello world!\n"</span>); </span><br><span class="line">	sleep(<span class="number">1</span> );</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘è¿è¡Œ<br> <code>gcc pthread.c -o pthread -lpthread</code><br> <code>./pthread</code></p>
</li>
<li>å°†<code>return</code>è¯­å¥å‰é¢çš„<code>sleep(1);</code>ç§»åˆ°<code>thread_fun</code>ä¸­çš„<code>printf</code>ä¹‹å‰,å†æ¬¡ç¼–è¯‘ä¸€é,è§‚å¯Ÿç»“æœã€‚å¯¹æ¯”ä¸Šæ¬¡å®éªŒ fork å®éªŒä¸­çˆ¶å­è¿›ç¨‹è¿è¡Œå…³ç³»,æœ‰ä»€ä¹ˆä¸åŒã€‚ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·?</li>
</ul>
<h4 id="u7EBF_u7A0B_u95F4_u7684_u8D44_u6E90_u5173_u7CFB"><a href="#u7EBF_u7A0B_u95F4_u7684_u8D44_u6E90_u5173_u7CFB" class="headerlink" title="çº¿ç¨‹é—´çš„èµ„æºå…³ç³»"></a>çº¿ç¨‹é—´çš„èµ„æºå…³ç³»</h4><ul>
<li><p>ç¼–å†™pthread2.c</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span> </span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span> </span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span> </span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span> </span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pthread_t</span> tid; </span><br><span class="line"><span class="keyword">int</span> share=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">thread_fun</span><span class="params">(<span class="keyword">void</span> * name)</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s: Hello world !\n"</span>,name); </span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">int</span> s =<span class="number">5</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>( i =<span class="number">0</span>;i &lt;<span class="number">1000</span>;i++)&#123;</span><br><span class="line">	share = <span class="number">111</span>;</span><br><span class="line">	sleep( s);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s has slept %d seconds;share = %d\n"</span>,</span><br><span class="line">		name, i*s, share);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> err;</span><br><span class="line">	err = pthread_create(&amp;tid,<span class="literal">NULL</span>, thread_fun,<span class="string">"Child thread"</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(err !=<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"can't create thread!\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Main thread: Hello world!\n"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> i ;</span><br><span class="line">	<span class="keyword">for</span>( i =<span class="number">0</span>;i &lt;<span class="number">1000</span>;i++)&#123;</span><br><span class="line">		share = <span class="number">333</span>;</span><br><span class="line">		sleep(<span class="number">1</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Main thread: has slept %d seconds;share = %d\n"</span>,i,share);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘è¿è¡Œ<br><code>gcc pthread2.c -o pthread2 -lpthread</code><br><code>./pthread2</code><br>@ä»”ç»†è§‚å¯Ÿä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ä¸­ share çš„è¾“å‡ºå€¼,æ˜¯å¦æ˜¯æƒ³è¦çš„ç»“æœ?å’Œä¸Šæ¬¡ fork å®éªŒé‚£ä¸ªä¸­çš„ n ç›¸æ¯”,æœ‰ä»€ä¹ˆä¸åŒ?ä¸ºä»€ä¹ˆ?</p>
</li>
</ul>
<h3 id="u7EBF_u7A0B_u95F4_u4E92_u65A5"><a href="#u7EBF_u7A0B_u95F4_u4E92_u65A5" class="headerlink" title="çº¿ç¨‹é—´äº’æ–¥"></a>çº¿ç¨‹é—´äº’æ–¥</h3><ul>
<li>ä¸ºäº†é˜²æ­¢ä¸Šä¾‹ä¸­å‡ºç°çš„é—®é¢˜,æˆ‘ä»¬éœ€è¦åˆ©ç”¨ pthread åº“æä¾›çš„äº’æ–¥é”æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚</li>
<li><p>ç¼–å†™pthread3.c</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;pthread.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;string.h&gt; </span></span><br><span class="line"><span class="comment">#include &lt;unistd.h&gt; </span></span><br><span class="line"><span class="comment">#include &lt;stdlib.h&gt; </span></span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"></span><br><span class="line">pthread_t tid;</span><br><span class="line"><span class="keyword">int</span> share=<span class="number">0</span>;</span><br><span class="line">pthread_mutex_t share_mutex = PTHREAD_MUTEX_INITIALIZER;</span><br><span class="line"></span><br><span class="line">void *thread_fun(void * name)&#123;</span><br><span class="line">	<span class="keyword">printf</span>(<span class="string">"<span class="variable">%s</span>: Hello world !\n"</span>,name); </span><br><span class="line">	<span class="keyword">int</span> i ;</span><br><span class="line">	<span class="keyword">int</span> <span class="keyword">s</span> =<span class="number">5</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>( i =<span class="number">0</span>;i &lt;<span class="number">1000</span>;i++)&#123;</span><br><span class="line">		pthread_mutex_lock(&amp;share_mutex);</span><br><span class="line">		share = <span class="number">111</span>;</span><br><span class="line">		<span class="keyword">sleep</span>( <span class="keyword">s</span>);</span><br><span class="line">		<span class="keyword">printf</span>(<span class="string">"<span class="variable">%s</span> has slept <span class="variable">%d</span> seconds; share =<span class="variable">%d</span>\n"</span>,</span><br><span class="line">			name,i*<span class="keyword">s</span>,share);</span><br><span class="line">		pthread_mutex_unlock(&amp;share_mutex); </span><br><span class="line">		<span class="keyword">return</span> NULL;</span><br><span class="line">ï½</span><br><span class="line"><span class="keyword">int</span> main() &#123;</span><br><span class="line">	<span class="keyword">int</span> err;</span><br><span class="line">	err = pthread_create(&amp;tid,NULL, thread_fun,<span class="string">"Child thread"</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(err !=<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">printf</span>(<span class="string">"can't create thread!\n"</span>);</span><br><span class="line">		<span class="keyword">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">printf</span>(<span class="string">"Main thread: Hello world!\n"</span>);</span><br><span class="line">	<span class="keyword">int</span> i ;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>( i =<span class="number">0</span>;i &lt;<span class="number">1000</span>;i++)&#123;</span><br><span class="line">		pthread_mutex_lock(&amp;share_mutex); </span><br><span class="line">		share = <span class="number">333</span>;</span><br><span class="line">		<span class="keyword">sleep</span>(<span class="number">1</span> );</span><br><span class="line">		<span class="keyword">printf</span>(<span class="string">"Main thread: has slept <span class="variable">%d</span> seconds;</span><br><span class="line">			share = <span class="variable">%d</span>\n"</span>,i,share);</span><br><span class="line">		pthread_mutex_unlock(&amp;share_mutex);</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br><span class="line">/*<span class="variable">@ä¸€</span>ä¸ªçº¿ç¨‹å¯ä»¥è°ƒç”¨ pthread_mutex_lock è·å¾— Mutex,å¦‚æœè¿™æ—¶å¦ä¸€ä¸ªçº¿ç¨‹å·²ç»è°ƒ ç”¨ pthread_mutex_lock è·å¾—äº†è¯¥ Mutex,åˆ™å½“å‰çº¿ç¨‹éœ€è¦æŒ‚èµ·ç­‰å¾…,ç›´åˆ°å¦ä¸€ä¸ªçº¿ ç¨‹è°ƒç”¨ pthread_mutex_unlock é‡Šæ”¾ Mutex,å½“å‰çº¿ç¨‹è¢«å”¤é†’,æ‰èƒ½è·å¾—è¯¥ Mutex å¹¶ ç»§ç»­æ‰§è¡Œã€‚*<span class="regexp">/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘è¿è¡Œ<br><code>gcc pthread3.c -o pthread3 -lpthread</code><br><code>./pthread3</code><br>@ è§‚å¯Ÿè¿è¡Œç»“æœã€‚ä¸»çº¿ç¨‹å’Œæ¬¡çº¿ç¨‹ä¸­çš„ä¸¤ä¸ª<code>sleep</code>è°ƒç”¨åˆ†åˆ«æ”¾åˆ° <code>pthread_mutex_unlock</code> ä¹‹å,å†æ¬¡ç¼–è¯‘è¿è¡Œ,è§‚å¯Ÿç»“æœ,æ€è€ƒç¬¬ä¸€æ¬¡è¿è¡Œçš„ç»“æœä¸º ä½•ä¸å¯¹? ä½¿ç”¨äº’æ–¥é‡æ—¶åº”è¯¥æ³¨æ„ä»€ä¹ˆé—®é¢˜?<br>@è¯¥ç¤ºä¾‹è¿˜ä»£ç ä¸­è¿˜å¼•å…¥ä¸¤ä¸ªæ¦‚å¿µ:ä¸´ç•ŒåŒº:ä¸»æ¬¡çº¿ç¨‹ä¸­è¢« <code>pthread_mutex_lock</code> å’Œ <code>pthread_mutex_unlock</code> å‡½æ•°ä¿æŠ¤èµ·æ¥çš„åŒºåŸŸã€‚ä¸´ç•Œèµ„æº:å˜é‡ <code>share</code>ã€‚è¯·å¤§å®¶å›å¿† æ“ä½œç³»ç»Ÿæ¦‚å¿µçŸ¥è¯†ã€‚ä¸´ç•Œèµ„æºã€ä¸´ç•ŒåŒºã€äº’æ–¥é‡ä¹‹é—´çš„å…³ç³»ã€‚</p>
</li>
</ul>
<h3 id="u6D88_u8D39_u8005_u751F_u4EA7_u8005_u95EE_u9898"><a href="#u6D88_u8D39_u8005_u751F_u4EA7_u8005_u95EE_u9898" class="headerlink" title="æ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜"></a>æ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜</h3><ul>
<li>ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œè¦ä¿è¯ä»¥ä¸‹å‡ ç‚¹:<ul>
<li>åŒä¸€æ—¶é—´å†…åªèƒ½æœ‰ä¸€ä¸ªç”Ÿäº§è€…ç”Ÿäº§</li>
<li>åŒä¸€æ—¶é—´å†…åªèƒ½æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹</li>
<li>ç”Ÿäº§è€…ç”Ÿäº§çš„åŒæ—¶æ¶ˆè´¹è€…ä¸èƒ½æ¶ˆè´¹</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—æ»¡æ—¶ç”Ÿäº§è€…ä¸èƒ½ç»§ç»­ç”Ÿäº§</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—ç©ºæ—¶æ¶ˆè´¹è€…ä¸èƒ½ç»§ç»­æ¶ˆè´¹</li>
</ul>
</li>
<li>æ•°æ®æ¨¡å‹<ul>
<li>ä»“åº“ï¼šwarehouse [CAPABILITY];</li>
<li>ç”Ÿäº§è€…ï¼šprocuder();</li>
<li>æ¶ˆè´¹è€…ï¼šconsumer();</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/01/07/Linux-lab4/" data-id="cinzxo1fb0006nayhpz167rpg" class="article-share-link" data-share="baidu" data-title="æ“ä½œç³»ç»Ÿç¬¬å››æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”åŒæ­¥ä¸äº’æ–¥">åˆ†äº«åˆ°</a>
      

      
        <a href="http://yoursite.com/2016/01/07/Linux-lab4/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/01/07/linux-lab5/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          æ“ä½œç³»ç»Ÿç¬¬äº”æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”å¯åŠ è½½å†…æ ¸æ¨¡å—
        
      </div>
    </a>
  
  
    <a href="/2016/01/07/Linux-lab3/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
      <div class="article-nav-title">æ“ä½œç³»ç»Ÿç¬¬ä¸‰æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”è¿›ç¨‹é—´é€šä¿¡</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <div id="ds-thread" class="ds-thread" data-thread-key="2016/01/07/Linux-lab4/" data-title="æ“ä½œç³»ç»Ÿç¬¬å››æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”åŒæ­¥ä¸äº’æ–¥" data-url="http://yoursite.com/2016/01/07/Linux-lab4/"></div>
  </section>

</section>
      
      <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">ä¸€æœˆ 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">åäºŒæœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">å…«æœˆ 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">è¿‘æœŸæ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/01/07/linux-lab6/">æ“ä½œç³»ç»Ÿç¬¬å…­æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”Procæ–‡ä»¶ç³»ç»Ÿ</a>
          </li>
        
          <li>
            <a href="/2016/01/07/linux-lab5/">æ“ä½œç³»ç»Ÿç¬¬äº”æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”å¯åŠ è½½å†…æ ¸æ¨¡å—</a>
          </li>
        
          <li>
            <a href="/2016/01/07/Linux-lab4/">æ“ä½œç³»ç»Ÿç¬¬å››æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”åŒæ­¥ä¸äº’æ–¥</a>
          </li>
        
          <li>
            <a href="/2016/01/07/Linux-lab3/">æ“ä½œç³»ç»Ÿç¬¬ä¸‰æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”è¿›ç¨‹é—´é€šä¿¡</a>
          </li>
        
          <li>
            <a href="/2016/01/06/Linux-lab1/">æ“ä½œç³»ç»Ÿç¬¬ä¸€æ¬¡ä¸Šæœºæ•™ç¨‹â€”â€”LinuxåŸºç¡€</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å‹æƒ…é“¾æ¥</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://szm.me/" target="_blank">ä¸€ä¸ªä½è°ƒçš„OSç¥</a>
          </li>
        
          <li>
            <a href="http://peixl.github.io" target="_blank">ä¸€ä¸ªç‚«å¨ƒçš„swiftğŸ¶</a>
          </li>
        
          <li>
            <a href="http://blog.codinglabs.org/" target="_blank">ä¸€ä¸ªåŒ—èˆªç®—æ³•å¤§ç¥</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 xpddwn<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="è¿”å›é¡¶éƒ¨"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- å¤šè¯´å…¬å…±jsä»£ç  start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"xpddwn"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- å¤šè¯´å…¬å…±jsä»£ç  end -->


<!-- ç™¾åº¦åˆ†äº« start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡"></a>
    <a class="article-share-qq" data-cmd="sqq" title="åˆ†äº«åˆ°QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘"></a>
    <a class="article-share-more" data-cmd="more" title="æ›´å¤š"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- ç™¾åº¦åˆ†äº« end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js" type="text/javascript"></script>

</div>
</body>
</html>
